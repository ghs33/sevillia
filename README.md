# sevillia
The main difficulty in predicting ratings for players with different position assignments along the pitch is the different effect each feature has on players based on their respective role assignment. Thus, our major concern was finding a model that would appropriately deal with this issue, taking into account that for many features there is a distinct effect on the match rating given to a player playing in different positions.
We believe the best approach in such a case is using the random forest algorithm – the player position is extremely likely to appear very high in which ever tree present in the model and therefore the rating assigned to each player in every match present in the database will be affected differently by the different features based upon the role of the player. We tried various forests with differing number of trees in each, and witnessed the out of sample error stopped to effectively decrease when we moved from 1024 to 2048 trees. Because the running time for training a model with 1024 trees is dramatically shorter than training one with 2048 trees, we chose the smaller model.
Similar to many other such cases, here too the cost of predicting with a lower error rate is in a wide sense the difficulty of interpretation. The random forest model applied, often referred to as a 'black box' model, is harder to explain as it does not produce an explicit size representing the magnitude of the effect each feature has on the response variable. Nevertheless, in recent years there has been some methods developed pointing out the relative feature importance, a metric showing how important was each feature in determining the response variable. For lack of time we did not include such sort of analysis in our code, but we strongly recommend further exploration of the matter in future handling of the discussed problem. In addition to plain investigation of the latter metric, one can also plot partial dependency plots, and more importantly multiway PD plots showing the feature importance for every position individually. 
Also worth mentioning are a few other adjustments we made – First we noticed that there is no real distinction between a player's team and the opposition, but only between team 1 and team 2, and a column indicating whether the player plays for team 1 or team 2. Therefore we made sure that the columns stay consistent by setting 'my' and 'op' columns for features concerning the players own team and the opposition respectively. As to missing values, for numeric variables we used KNN impute, and for categoric features we replaced missing values with the modes, grouped by important other features we deemed crucial in setting the values for these categories.   
